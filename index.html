<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é©¬æ‹‰æ¾è®­ç»ƒæ—¥è®° V3.2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #f3f4f6; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
        .card { transition: all 0.2s; }
        .card:active { transform: scale(0.98); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* åŠ¨ä½œæ‰“å¡æ ·å¼ä¼˜åŒ– */
        .action-item { transition: all 0.2s; }
        .action-item.checked { background-color: #effdf5; border-color: #86efac; }
        .action-item.checked .check-box { background-color: #22c55e; border-color: #22c55e; }
        .action-item.checked .action-name { color: #166534; text-decoration: line-through; opacity: 0.8; }
    </style>
</head>
<body class="pb-24">

    <div class="bg-blue-700 text-white p-4 sticky top-0 z-20 shadow-md">
        <div class="flex justify-between items-center mb-3">
            <h1 class="text-lg font-bold">ğŸƒâ€â™‚ï¸ 26å‘¨æŒ‘æˆ˜ (åŠ›é‡ç‰ˆ)</h1>
            <div class="flex space-x-2">
                <button onclick="generateReport()" class="bg-green-500 text-xs px-3 py-1.5 rounded shadow hover:bg-green-600 font-medium">
                    ğŸ“‹ å¤åˆ¶
                </button>
                <button onclick="backupToEmail()" class="bg-gray-100 text-blue-700 text-xs px-3 py-1.5 rounded shadow hover:bg-white font-bold flex items-center">
                    ğŸ“© é‚®ä»¶å¤‡ä»½
                </button>
            </div>
        </div>
        
        <select id="week-selector" onchange="changeWeek()" class="w-full p-2 text-black rounded-lg outline-none font-bold shadow-inner bg-blue-50">
            <option value="1">ç¬¬1å‘¨ï¼šåŸºç¡€ä¸ä¿®å¤ (11/20-11/26)</option>
            <option value="2">ç¬¬2å‘¨ï¼šä¿æŒè¿è´¯æ€§ (11/27-12/03)</option>
            <option value="3">ç¬¬3å‘¨ï¼šä¸“æ³¨å§¿åŠ¿ (12/04-12/10)</option>
            <option value="4">ç¬¬4å‘¨ï¼šå‡é‡ä¼‘æ¯ (12/11-12/17)</option>
        </select>
    </div>

    <div class="px-4 pt-4">
        <div class="flex justify-between text-xs text-gray-500 mb-1">
            <span>æœ¬å‘¨è¿›åº¦</span>
            <span id="progress-text">0/7</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-2.5">
            <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
        </div>
    </div>

    <div id="schedule-list" class="p-4 space-y-3">
        </div>

    <div id="modal" class="fixed inset-0 bg-black bg-opacity-60 hidden flex items-end justify-center z-50 backdrop-blur-sm">
        <div class="bg-white w-full rounded-t-2xl p-6 h-5/6 overflow-y-auto animate-slide-up flex flex-col">
            <div class="flex justify-between items-center mb-4 flex-shrink-0">
                <h2 class="text-xl font-bold text-blue-800" id="modal-title">ç¼–è¾‘è®°å½•</h2>
                <button onclick="closeModal()" class="text-gray-400 text-2xl">&times;</button>
            </div>
            
            <div class="space-y-5 flex-grow overflow-y-auto pb-20">
                
                <div id="action-section">
                    <label class="block text-sm font-bold text-gray-700 mb-2">ğŸ’ª ä»Šæ—¥åŠ¨ä½œ (ç‚¹å‡»æŸ¥çœ‹è¦ç‚¹å¹¶å‹¾é€‰)</label>
                    <div id="action-list" class="space-y-2">
                        </div>
                </div>

                <div class="border-t pt-4">
                    <label class="block text-sm font-bold text-gray-700 mb-1">âœ… è·‘æ­¥æ•°æ® / å®é™…å®Œæˆ</label>
                    <input type="text" id="input-result" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none" placeholder="ä¾‹ï¼š5.02å…¬é‡Œï¼Œ35åˆ†é’Ÿ">
                </div>

                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">ğŸ¦µ èº«ä½“æ„Ÿå— (è†ç›–/é«‚èƒ«æŸ)</label>
                    <textarea id="input-feeling" rows="2" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none" placeholder="è†ç›–å†…ä¾§æ„Ÿè§‰å¦‚ä½•ï¼Ÿ"></textarea>
                </div>

                <div>
                    <label class="block text-sm font-bold text-gray-700 mb-1">ğŸ“‰ ç—›æ„Ÿæ‰“åˆ† (0-10)</label>
                    <div class="flex space-x-2 overflow-x-auto py-2 no-scrollbar">
                        <script>
                            for(let i=0; i<=10; i++) {
                                document.write(`<div onclick="selectPain(${i})" id="pain-btn-${i}" class="pain-btn flex-shrink-0 w-10 h-10 rounded-full border flex items-center justify-center cursor-pointer font-bold ${i>=3 ? 'border-red-200 text-red-600' : 'border-green-200 text-green-600'}">${i}</div>`);
                            }
                        </script>
                    </div>
                    <input type="hidden" id="input-pain">
                </div>
                
                <div class="h-10"></div> </div>

            <div class="absolute bottom-0 left-0 w-full p-4 bg-white border-t border-gray-100">
                <button onclick="saveData()" class="w-full bg-blue-600 active:bg-blue-700 text-white py-3 rounded-xl font-bold text-lg shadow-lg">ä¿å­˜æ‰“å¡</button>
            </div>
        </div>
    </div>

    <script>
        // ================= æ•°æ®å®šä¹‰ (æ¯å‘¨3ç»ƒç‰ˆ V3.2) =================
        const masterPlan = [
            // ç¬¬1å‘¨
            { 
                week: 1, date: "11/20 (å‘¨å››)", task: "è½»æ¾è·‘ 5å…¬é‡Œ", focus: "è·‘é“è½¨ (åŒè„šåˆ†å®½)", 
                actions: [
                    {name: "è·‘é“è½¨å§¿åŠ¿ç¡®è®¤", desc: "åŒè„šé—´è·10cmï¼Œæ‹’ç»çŒ«æ­¥", done: false},
                    {name: "è·‘åæ‹‰ä¼¸ (è´è¶å¼)", desc: "èƒŒæŒºç›´ï¼Œè†ç›–å‘ä¸‹å‹ï¼Œ30ç§’", done: false},
                    {name: "ç¡å‰ VMO æ¿€æ´» (10æ¬¡)", desc: "åå§¿ä¼¸ç›´è…¿ç”¨åŠ›æ”¶ç¼©å†…ä¾§å¤´", done: false}
                ] 
            },
            { 
                week: 1, date: "11/21 (å‘¨äº”)", task: "åŠ›é‡è®­ç»ƒ (ä¸Šè‚¢/æ ¸å¿ƒ)", focus: "æ ¸å¿ƒæ¿€æ´» (ä¸ç´¯è…¿)", 
                actions: [
                    {name: "å¹³æ¿æ”¯æ’‘ (3ç»„x45ç§’)", desc: "æ”¶ç´§æ ¸å¿ƒï¼Œä¸å¡Œè…°", done: false},
                    {name: "æ­»è™«å¼ (3ç»„x15æ¬¡)", desc: "è…°è´´åœ°ï¼ŒåŠ¨ä½œç¼“æ…¢", done: false},
                    {name: "ä¿¯å§æ’‘ (3ç»„)", desc: "å¢å¼ºæ‘†è‡‚åŠ›é‡", done: false},
                    {name: "è´è¶å¼æ‹‰ä¼¸", desc: "æ”¾æ¾å†…ä¾§ï¼Œå‡†å¤‡æ˜æ—¥é•¿è·‘", done: false}
                ]
            },
            { 
                week: 1, date: "11/22 (å‘¨å…­)", task: "é•¿è·ç¦»è·‘ 8å…¬é‡Œ", focus: "è·‘4èµ°1 | é˜²å†…æ‰£", 
                actions: [
                    {name: "ä¸¥æ ¼è·‘4èµ°1", desc: "åˆ°ç‚¹å°±èµ°ï¼Œä¸è¦é€å¼º", done: false},
                    {name: "è†ç›–å¯¹å‡†ç¬¬äºŒè„šè¶¾", desc: "è½åœ°ç¬é—´è†ç›–ä¸å†…æ‰£", done: false},
                    {name: "è·‘åå…¨å¥—æ‹‰ä¼¸", desc: "è‡€éƒ¨ã€å¤§è…¿å‰åä¾§ã€å†…ä¾§", done: false}
                ]
            },
            { 
                week: 1, date: "11/23 (å‘¨æ—¥)", task: "
